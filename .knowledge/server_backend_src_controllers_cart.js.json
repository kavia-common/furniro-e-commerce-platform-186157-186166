{"is_source_file": true, "format": "JavaScript", "description": "This file defines a CartController class managing shopping cart operations such as get, add, update, remove, and clear. It interacts with a Prisma ORM for database access and handles HTTP requests and responses related to the shopping cart functionality.", "external_files": ["../lib/prisma"], "external_methods": ["getPrisma"], "published": ["CartController"], "classes": [{"name": "CartController", "description": "A controller class providing endpoints for managing a user's shopping cart, including retrieving, adding, updating, removing, and clearing cart items."}], "methods": [{"name": "get", "description": "Retrieves the current authenticated user's cart, including items and related product details."}, {"name": "add", "description": "Adds a product to the user's cart; creates the cart if it does not exist; updates the item quantity if already present."}, {"name": "update", "description": "Updates the quantity of a specific product in the cart; removes the product if the quantity provided is zero or less."}, {"name": "remove", "description": "Removes a specific product from the user's cart."}, {"name": "clear", "description": "Empties all items from the user's cart."}, {"name": "getOrCreateUserCart(prisma, userId)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getPrisma()", "prisma.cart.upsert", "prisma.cartItem.upsert", "prisma.cartItem.deleteMany", "prisma.cart.findUnique", "prisma.product.findUnique", "res.json", "res.status", "res.status().json()"], "search-terms": ["CartController", "addItem", "updateItemQuantity", "removeProductFromCart", "clearUserCart"], "state": 2, "file_id": 20, "knowledge_revision": 42, "git_revision": "", "ctags": [{"_type": "tag", "name": "CartController", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^class CartController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const cart = await getOrCreateUserCart(prisma, req.user.id);$/", "language": "JavaScript", "kind": "field", "scope": "CartController", "scopeKind": "class"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const cart = await prisma.cart.upsert({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cleared", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const cleared = await prisma.cart.findUnique({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^module.exports = new CartController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getOrCreateUserCart", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^async function getOrCreateUserCart(prisma, userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(prisma, userId)"}, {"_type": "tag", "name": "prisma", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const prisma = getPrisma();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "prisma", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const prisma = getPrisma();$/", "language": "JavaScript", "kind": "field", "scope": "CartController", "scopeKind": "class"}, {"_type": "tag", "name": "product", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const product = await prisma.product.findUnique({ where: { id: productId } });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "productId", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const productId = Number(req.params.productId);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^  async get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "CartController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    return res.json(cart);$/", "language": "JavaScript", "kind": "field", "scope": "CartController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^  async get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "CartController", "scopeKind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const updated = await prisma.cart.findUnique({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/cart.js", "pattern": "/^    const userId = req.user.id;$/", "language": "JavaScript", "kind": "constant"}], "hash": "45230949ba62cb19779fea3d523e273a", "format-version": 4, "code-base-name": "server_backend", "filename": "server_backend/src/controllers/cart.js", "fields": [{"name": "const cart = await getOrCreateUserCart(prisma, req.user.id);", "scope": "CartController", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new CartController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "const prisma = getPrisma();", "scope": "CartController", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(req, res) {", "scope": "CartController", "scopeKind": "class", "description": "unavailable"}, {"name": "return res.json(cart);", "scope": "CartController", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"42": ""}]}