{"is_source_file": true, "format": "JavaScript", "description": "This file defines an OrdersController class with methods for creating orders, listing user orders, retrieving specific orders, and listing all orders. It includes logic for handling cart-based and direct item order creation, as well as interacting with a Prisma ORM for database operations.", "external_files": ["../lib/prisma", "@prisma/client"], "external_methods": ["getPrisma", "Prisma.Decimal"], "published": ["OrdersController"], "classes": [{"name": "OrdersController", "description": "Controller class handling order-related endpoints, including create, listMine, getById, and listAll."}], "methods": [{"name": "create(req, res)", "description": "Creates an order from a user's cart or from a payload of items, computes total price, and optionally clears the cart.", "scope": "OrdersController", "scopeKind": "class"}, {"name": "listMine(req, res)", "description": "Lists all orders belonging to the authenticated user.", "scope": "OrdersController", "scopeKind": "class"}, {"name": "getById(req, res)", "description": "Retrieves a specific order by ID if the requesting user is authorized.", "scope": "OrdersController", "scopeKind": "class"}, {"name": "listAll(req, res)", "description": "Lists all orders in the system, accessible to admin users.", "scope": "OrdersController", "scopeKind": "class"}, {"name": "computeCartTotal(prisma, cartId)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getPrisma()", "prisma.cart.findUnique()", "computeCartTotal(prisma, cart.id)", "prisma.product.findMany()", "prisma.order.create()", "prisma.cartItem.deleteMany()", "prisma.order.findMany()"], "search-terms": ["orders controller", "create order", "list user orders", "order retrieval", "admin order listing", "cart processing", "Prisma ORM"], "state": 2, "file_id": 21, "knowledge_revision": 44, "git_revision": "", "ctags": [{"_type": "tag", "name": "OrdersController", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^class OrdersController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "computeCartTotal", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^async function computeCartTotal(prisma, cartId) {$/", "language": "JavaScript", "kind": "function", "signature": "(prisma, cartId)"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^  async create(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "OrdersController", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^module.exports = new OrdersController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^  async getById(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "OrdersController", "scopeKind": "class"}, {"_type": "tag", "name": "listAll", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^  async listAll(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "OrdersController", "scopeKind": "class"}, {"_type": "tag", "name": "listMine", "path": "/home/kavia/workspace/code-generation/furniro-e-commerce-platform-186157-186166/server_backend/src/controllers/orders.js", "pattern": "/^  async listMine(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "OrdersController", "scopeKind": "class"}], "hash": "166c63cc47f440456386f4e600fae925", "format-version": 4, "code-base-name": "server_backend", "filename": "server_backend/src/controllers/orders.js", "fields": [{"name": "module.exports = new OrdersController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"44": ""}]}